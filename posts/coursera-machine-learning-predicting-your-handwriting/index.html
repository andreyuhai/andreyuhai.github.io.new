<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Coursera machine learning exercise 4 predicting your handwriting" /><meta property="og:locale" content="en" /><meta name="description" content="I’ve been studying Andrew Ng’s machine learning course on Coursera for a while now. I’ve just finished 4th week assignment which is about training multiclass classifiers and using already trained neural networks to predict handwritten digits." /><meta property="og:description" content="I’ve been studying Andrew Ng’s machine learning course on Coursera for a while now. I’ve just finished 4th week assignment which is about training multiclass classifiers and using already trained neural networks to predict handwritten digits." /><link rel="canonical" href="https://blog.burakaymakci.com/posts/coursera-machine-learning-predicting-your-handwriting/" /><meta property="og:url" content="https://blog.burakaymakci.com/posts/coursera-machine-learning-predicting-your-handwriting/" /><meta property="og:site_name" content="Burak Kaymakci" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-09-25T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Coursera machine learning exercise 4 predicting your handwriting" /><meta name="twitter:site" content="@andreyuhai" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-09-25T00:00:00+02:00","datePublished":"2019-09-25T00:00:00+02:00","description":"I’ve been studying Andrew Ng’s machine learning course on Coursera for a while now. I’ve just finished 4th week assignment which is about training multiclass classifiers and using already trained neural networks to predict handwritten digits.","headline":"Coursera machine learning exercise 4 predicting your handwriting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.burakaymakci.com/posts/coursera-machine-learning-predicting-your-handwriting/"},"url":"https://blog.burakaymakci.com/posts/coursera-machine-learning-predicting-your-handwriting/"}</script><title>Coursera machine learning exercise 4 predicting your handwriting | Burak Kaymakci</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Burak Kaymakci"><meta name="application-name" content="Burak Kaymakci"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.updateMermaid(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Burak Kaymakci</a></div><div class="site-subtitle font-italic">A life-long student who loves programming languages and the ones we speak.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://www.linkedin.com/in/burakaymakci/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://github.com/andreyuhai" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://stackoverflow.com/users/4796762/burak-kaymakci" aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-stack-overflow"></i> </a> <a href="https://twitter.com/andreyuhai" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Coursera machine learning exercise 4 predicting your handwriting</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Coursera machine learning exercise 4 predicting your handwriting</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/andreyuhai">Burak Kaymakci</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2019-09-25 00:00:00 +0200" data-toggle="tooltip" data-placement="bottom" title="Wed, Sep 25, 2019, 12:00 AM +0200" >Sep 25, 2019</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1929 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><p>I’ve been studying Andrew Ng’s <a href="https://www.coursera.org/learn/machine-learning">machine learning course</a> on Coursera for a while now. I’ve just finished 4th week assignment which is about training multiclass classifiers and using already trained neural networks to predict handwritten digits.</p><p>The classifiers are trained on 5000 20x20 grayscale images.</p><p>After I’ve completed the assignment, I was wondering whether I could predict my own handwriting using the trained classifiers.</p><h2 id="how-to-predict-your-own-handwriting">How to predict your own handwriting?<a href="#how-to-predict-your-own-handwriting"><i class="fas fa-hashtag"></i></a></h2></h2><p>To predict your own handwriting successfully, you should make sure you follow these two guidelines below that I’ve figured out by trial and error and also asking on <a href="https://www.coursera.org/learn/machine-learning/discussions/weeks/4/threads/Jk_M4t1AEemXpRLspIcZXA">discussion forum</a>:</p><ul><li>The size of the digit in the image should not be too big or too small.<li>The background pixels should be a consistent shade of gray for almost every pixel or should be as consistent as possible, not to mention that the digit pixels should be white :).</ul><h2 id="how-do-i-make-my-background-a-shade-of-gray-and-the-digit-white">How do I make my background a shade of gray and the digit white?<a href="#how-do-i-make-my-background-a-shade-of-gray-and-the-digit-white"><i class="fas fa-hashtag"></i></a></h2></h2><p>Of course, it is difficult to find a gray paper and a white pen to ensure the guideline above. Instead we will use a light colored paper (I’ve used a yellow post-it) and a black or blue pen, then we will map our pixel values between 0 and 1 (considering the quoted tip below) after <a href="https://www.mathworks.com/help/matlab/ref/rgb2gray.html">converting our image to grayscale</a> in MATLAB which will result in the background being gray and the digit being white.</p><p>I will explain this mapping process in detail in this post as well.</p><blockquote><p>The image pixels are scaled (or normalized) so that -1.0 is black, 0.0 is grey, and +1.0 is white. However, nearly all of the pixels are in the 0.0 to +1.0 range. The backgrounds are grey, and the image “pen strokes” are white.<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></p></blockquote><h2 id="predicting-your-own-handwriting">Predicting your own handwriting<a href="#predicting-your-own-handwriting"><i class="fas fa-hashtag"></i></a></h2></h2><p>After you write down a digit on a paper, take a photo of it and upload it to your computer, you will first <a href="https://www.mathworks.com/help/matlab/ref/imread.html">read the image</a> in MATLAB. I will use the image below for predicting my handwriting and then, at the end of this post, I will share a few more images of different digits that I’ve successfully predicted so you can try to predict them on your own, if you would like to, or just try your own handwriting since that’s what this post is about, haha.</p><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/digit_five.jpg" alt="Digit five" /></figure><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">% Reading the image</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">imread</span><span class="p">(</span><span class="s1">'/path/to/digit_five.jpg'</span><span class="p">);</span>
<span class="c1">% Converting RGB img to grayscale</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">rgb2gray</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
<span class="c1">% Resizing it to be 20x20</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">imresize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">]);</span>
<span class="c1">% Display img</span>
<span class="nb">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</pre></table></code></div></div><p>Now you should see your 20x20 grayscale image, or maybe you can’t because it is too small, haha. You can display before resizing anyway.</p><h2 id="but-there-is-a-problem">But there is a problem<a href="#but-there-is-a-problem"><i class="fas fa-hashtag"></i></a></h2></h2><p>In the image, our background color is close to white and the digit is black contrary to images in the dataset, also our pixel values are between <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">255</code> whereas pixel values of images in the dataset are between <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">1</code> roughly (-0.1320 and 1.1277 actually).</p><p>This is where we should map our pixel values to comply with the images in the dataset.</p><hr /><p>To better visualize the problem that I’ve explained above take a look at the image below where I’ve compared the image of my handwriting and a random image from the dataset.</p><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/comparison_digit_five_digit_two.png" alt="Comparison of the image of my handwriting and an image from the database" /></figure><p>As you can see from the image, we need to map our pixel values between <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">1</code> so that our image will comply with pixel values of images in the dataset which are all between <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">1</code> roughly.</p><p>Moreover we need to cross map our pixel values (I’ve just made up this term, just please correct me in the comments) meaning that we need to map a pixel value of <code class="language-plaintext highlighter-rouge">0</code> from our own image to <code class="language-plaintext highlighter-rouge">1</code> so that our black pixels will turn white and we should map a pixel value of <code class="language-plaintext highlighter-rouge">255</code> to <code class="language-plaintext highlighter-rouge">0</code> so that our white pixels will turn gray, in other words, this process will turn our digit white and our background gray which is exactly what we want to achieve.</p><h2 id="finally-the-mapping-part">Finally! The mapping part<a href="#finally-the-mapping-part"><i class="fas fa-hashtag"></i></a></h2></h2><blockquote><p>If your number X falls between A and B, and you would like Y to fall between C and D, you can apply the following linear transform:<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Y = (X-A)/(B-A) * (D-C) + C
which is the same as :
new_value = (old_value - old_bottom) / (old_top - old_bottom) * (new_top - new_bottom) + new_bottom;
</pre></table></code></div></div></blockquote><p>Using the formula above we will map all our pixels. Instead of using <code class="language-plaintext highlighter-rouge">255</code> and <code class="language-plaintext highlighter-rouge">0</code> as the <code class="language-plaintext highlighter-rouge">old_top</code> and <code class="language-plaintext highlighter-rouge">old_bottom</code>, I’ve assumed the minimum value in my image matrix to be my <code class="language-plaintext highlighter-rouge">old_bottom</code> and maximum to be my <code class="language-plaintext highlighter-rouge">old_top</code>.</p><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">absolute_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">img</span><span class="p">(:));</span> <span class="c1">% 192 which is B in the formula or old_top</span>
<span class="n">absolute_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">img</span><span class="p">(:));</span> <span class="c1">% 104 which is A in the formula or old_bottom</span>
</pre></table></code></div></div><p>In other words, I’ve assumed the minimum pixel value in my image to be black and the maximum pixel value to be white because this way I can map my pixel values to get my digit white and the background gray. Take a look at the image below to see the difference.</p><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/comparison_different_old_bottom_and_old_top.png" alt="Comparison of the image of my handwriting and an image from the database" /></figure><p>Our <code class="language-plaintext highlighter-rouge">new_top</code> will be <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">new_bottom</code> will be <code class="language-plaintext highlighter-rouge">1</code> as we want our white color to turn gray and gray to turn white.</p><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">% Mapping pixel values</span>
<span class="n">new_top</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">new_bottom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="c1">% Before mapping, we need to cast our img to double to get precision</span>
<span class="c1">% because now it is of type uint8 which will not give us any precision</span>
<span class="c1">% which might cause all our pixel values being 1s or 0s</span>
<span class="c1">% when we divide our img matrix</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">double</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
<span class="n">mapped_img</span> <span class="o">=</span> <span class="p">(</span><span class="n">img</span> <span class="o">-</span> <span class="n">absolute_min</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="n">absolute_max</span> <span class="o">-</span> <span class="n">absolute_min</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">new_top</span> <span class="o">-</span> <span class="n">new_bottom</span><span class="p">)</span> <span class="o">+</span> <span class="n">new_bottom</span><span class="p">;</span>
</pre></table></code></div></div><p>After this mapping process, we can finally use <code class="language-plaintext highlighter-rouge">displayData</code> function to display our image.</p><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">displayData</span><span class="p">(</span><span class="n">mapped_img</span><span class="p">(:)</span><span class="o">'</span><span class="p">);</span>
</pre></table></code></div></div><p>Which will display the image below.</p><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/digit_five_mapped.png" alt="Mapped digit five" /></figure><p>We can now try to predict our handwriting using <code class="language-plaintext highlighter-rouge">predictOneVsAll</code> with already trained classifiers <code class="language-plaintext highlighter-rouge">all_theta</code>.</p><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">predictOneVsAll</span><span class="p">(</span><span class="n">all_theta</span><span class="p">,</span> <span class="n">mapped_img</span><span class="p">(:)</span><span class="o">'</span><span class="p">)</span>
</pre></table></code></div></div><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/prediction_of_the_image_digit_five.png" alt="Prediction of the image digit five" /></figure><h2 id="oops-something-went-wrong">Oops! Something went wrong.<a href="#oops-something-went-wrong"><i class="fas fa-hashtag"></i></a></h2></h2><p>Well, actually nothing went wrong for this particular image. As I’ve mentioned at the beginning of my post. This prediction relies on the background color and its consistency through background pixels, so if you are trying your own handwriting you might not have gotten the background color right, but this might not be the only reason.</p><h2 id="what-should-i-do-then">What should I do then?<a href="#what-should-i-do-then"><i class="fas fa-hashtag"></i></a></h2></h2><p>After I’ve tried to predict all the digits in different sizes and colors on post-its without fiddling with the pixel values. I’ve decided to fiddle with the pixel values to see whether I can get the background color right and predict the digit successfully.</p><p>I’ve come up with the function below which maps the pixel values in the image matrix (so you don’t need to map pixel values manually) and increments all pixel values gradually trying to predict the digit with the incremented pixel values. This way we are trying to get the background color right so that we can predict the digit successfully. Once it predicts the digit right, the function returns the number that has been added to mapped pixel values which helped us predict the digit correctly, otherwise <code class="language-plaintext highlighter-rouge">-1</code> is returned.</p><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="c1">% This function tries to find the right value which makes the </span>
<span class="c1">% background color the closest to the one in the dataset images</span>
<span class="c1">% so that our "predictOneVsAll" function can predict our handwriting correctly.</span>
<span class="c1">% If predicted correctly with the number by which the pixel values are incremented,</span>
<span class="c1">% the number returned. -1 otherwise.</span>

<span class="c1">% img: 20x20 grayscale image cast to double().</span>
<span class="c1">% all_theta: theta values for classifiers from the exercise</span>
<span class="c1">% y: the actual value that is to be predicted in the image, in this case it is 5.</span>

<span class="k">function</span> <span class="n">p</span> <span class="o">=</span> <span class="n">findRightBgColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">all_theta</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
  <span class="c1">% Get max value from the image matrix</span>
  <span class="n">max_value</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">img</span><span class="p">(:));</span> 
  <span class="c1">% Get min value from the image matrix</span>
  <span class="n">min_value</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">img</span><span class="p">(:));</span>
  <span class="c1">% Set p -1 in case we can't predict the digit successfully so the function returns -1</span>
  <span class="n">p</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="c1">% Map pixel values between 0 and 1</span>
  <span class="n">mapped_img</span> <span class="o">=</span> <span class="p">(</span><span class="n">img</span> <span class="o">-</span> <span class="n">min_value</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="n">max_value</span> <span class="o">-</span> <span class="n">min_value</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="c1">% Increment the mapped image matrix </span>
  <span class="c1">% by adding all the values from -0.9 to 1 with a step size of 0.01</span>
  <span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.9</span><span class="p">:</span><span class="mf">0.01</span><span class="p">:</span><span class="mi">1</span>
    <span class="c1">% Increment by i</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">mapped_img</span> <span class="o">+</span> <span class="n">i</span><span class="p">;</span> 
    <span class="c1">% Try to predict the new image matrix with incremented pixel values</span>
    <span class="n">prediction</span> <span class="o">=</span> <span class="n">predictOneVsAll</span><span class="p">(</span><span class="n">all_theta</span><span class="p">,</span> <span class="n">temp</span><span class="p">(:)</span><span class="o">'</span><span class="p">);</span>
    <span class="c1">% If predicted successfully</span>
    <span class="k">if</span> <span class="n">prediction</span> <span class="o">==</span> <span class="n">y</span>
      <span class="c1">% Set p to the number that has been added to all pixel values</span>
      <span class="n">p</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></table></code></div></div><p>So let’s see whether we can get the background color right using this function.</p><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1">% Read the image</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">imread</span><span class="p">(</span><span class="s1">'/path/to/digit_five.jpg'</span><span class="p">);</span>
<span class="c1">% Convert RGB to grayscale</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">rgb2gray</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
<span class="c1">% Resize the image to be 20x20</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">imresize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
<span class="c1">% Convert the image matrix from uint8 to double</span>
<span class="c1">% so that we can get precision when we map</span>
<span class="c1">% or when we divide our pixel values.</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">double</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
<span class="c1">% Calling our function to find the right background color.</span>
<span class="n">findRightBgColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">all_theta</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></table></code></div></div><p>Which returns:</p><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/find_right_bg_color_digit_five.png" alt="Finding right background color" /></figure><p><code class="language-plaintext highlighter-rouge">-0.3900</code> means that we need to sum all our pixel values in our <code class="language-plaintext highlighter-rouge">img</code> matrix with <code class="language-plaintext highlighter-rouge">-0.3900</code> so that we will get the right background color for prediction.</p><h2 id="finally-predicting">Finally predicting!<a href="#finally-predicting"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="c1">% Read the image</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">imread</span><span class="p">(</span><span class="s1">'/path/to/digit_five.jpg'</span><span class="p">);</span>
<span class="c1">% Convert RGB to grayscale</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">rgb2gray</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
<span class="c1">% Resize the image to be 20x20</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">imresize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
<span class="c1">% Convert the image matrix from uint8 to double</span>
<span class="c1">% so that we can get precision when we map</span>
<span class="c1">% or when we divide our pixel values.</span>
<span class="n">img</span> <span class="o">=</span> <span class="nb">double</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
<span class="c1">% Get min and max values for mapping</span>
<span class="n">min_val</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">img</span><span class="p">(:));</span>
<span class="n">max_val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">img</span><span class="p">(:));</span>
<span class="c1">% Map pixel values</span>
<span class="n">mapped_img</span> <span class="o">=</span> <span class="p">(</span><span class="n">img</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="n">max_val</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">0</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="c1">% Add -0.3900 to all pixel values</span>
<span class="n">incr_mapped_img</span> <span class="o">=</span> <span class="n">mapped_img</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.3900</span><span class="p">)</span>
<span class="c1">% Display mapped_img and incremented_mapped_img </span>
<span class="c1">% side by side so you can see the difference in backgrounds</span>
<span class="nb">figure</span><span class="p">;</span>
<span class="c1">% Divide the figure into 1x2 grid and select the first one.</span>
<span class="nb">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="c1">% Display mapped_img on the first grid</span>
<span class="n">displayData</span><span class="p">(</span><span class="n">mapped_img</span><span class="p">(:)</span><span class="o">'</span><span class="p">);</span>
<span class="c1">% Set the title of mapped_img</span>
<span class="nb">title</span><span class="p">({</span><span class="s1">'mapped__img'</span><span class="p">,</span> <span class="s1">'which is not incremented by -0.39'</span><span class="p">,</span> <span class="s1">'which we couldn</span><span class="se">''</span><span class="s1">t predict successfully '</span><span class="p">})</span>
<span class="c1">% Select the second grid</span>
<span class="nb">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="c1">% Display incr_mapped_img on the second grid </span>
<span class="n">displayData</span><span class="p">(</span><span class="n">incr_mapped_img</span><span class="p">(:)</span><span class="o">'</span><span class="p">);</span>
<span class="c1">% Set the title of incr_mapped_img</span>
<span class="nb">title</span><span class="p">({</span><span class="s1">'incr__mapped__img'</span><span class="p">,</span> <span class="s1">'which is incremented by -0.39'</span><span class="p">,</span> <span class="s1">'which we predicted successfully '</span><span class="p">})</span>
<span class="c1">% Now you can see two different images</span>
<span class="c1">% side by side for comparison of their backgrounds.</span>
<span class="c1">% I've also added a screenshot of these two images below.</span>

</pre></table></code></div></div><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/comparison_of_mapped_img_and_incr_mapped_img.png" alt="Comparison of mapped_img and incr_mapped_img" /></figure><p>Now that we’ve done everything let’s try to predict the digit in our <code class="language-plaintext highlighter-rouge">incr_mapped_img</code></p><div class="language-matlab highlighter-rouge"><div class="code-header"> <span label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">predictOneVsAll</span><span class="p">(</span><span class="n">all_theta</span><span class="p">,</span> <span class="n">incr_mapped_img</span><span class="p">)</span>
</pre></table></code></div></div><p>Which will return:</p><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/correct_prediction.png" alt="Correctly predicted handwriting!" /></figure><h2 id="other-handwritten-digits">Other handwritten digits<a href="#other-handwritten-digits"><i class="fas fa-hashtag"></i></a></h2></h2><p>In case you want to test, here are some other handwritten digits by me that I could successfully predict using the technique above.</p><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/digit_six.jpg" alt="Digit six" /></figure><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/digit_seven.jpg" alt="Digit seven" /></figure><figure> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/digit_three.jpg" alt="Digit three" /> <img data-proofer-ignore data-src="https://blog.burakaymakci.com/images/2019-09-25-coursera-machine-learning-predicting-your-handwriting/digit_two.jpg" alt="Digit two" /></figure><h2 id="references">References<a href="#references"><i class="fas fa-hashtag"></i></a></h2></h2><div class="footnotes" role="doc-endnotes"><ol><li id="fn:1" role="doc-endnote"><p><a href="https://www.coursera.org/learn/machine-learning/resources/Uuxg6">Tips for classifying your own images</a> - ML:Programming Exercise 4:Neural Networks Learning <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:2" role="doc-endnote"><p><a href="https://stackoverflow.com/a/345204/4796762">Mapping numbers</a> - Stack Overflow <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p></ol></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/til/'>TIL</a>, <a href='/categories/matlab/'>MATLAB</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/octave/" class="post-tag no-text-decoration" >octave</a> <a href="/tags/matlab/" class="post-tag no-text-decoration" >matlab</a> <a href="/tags/machine-learning/" class="post-tag no-text-decoration" >machine-learning</a> <a href="/tags/multiclass-classifiers/" class="post-tag no-text-decoration" >multiclass-classifiers</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Coursera machine learning exercise 4 predicting your handwriting - Burak Kaymakci&url=https://blog.burakaymakci.com/posts/coursera-machine-learning-predicting-your-handwriting/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Coursera machine learning exercise 4 predicting your handwriting - Burak Kaymakci&u=https://blog.burakaymakci.com/posts/coursera-machine-learning-predicting-your-handwriting/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Coursera machine learning exercise 4 predicting your handwriting - Burak Kaymakci&url=https://blog.burakaymakci.com/posts/coursera-machine-learning-predicting-your-handwriting/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/creating-a-function-with-inputs-from-a-file-at-compile-time-using-elixir-ast/">Creating a function with inputs from a file at compile time using Elixir AST</a><li><a href="/posts/how-do-supervisors-not-crash-when-linked-process-crashes/">How do supervisors not crash when one of the children processes crashes</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/elixir/">elixir</a> <a class="post-tag" href="/tags/ruby/">ruby</a> <a class="post-tag" href="/tags/matlab/">matlab</a> <a class="post-tag" href="/tags/octave/">octave</a> <a class="post-tag" href="/tags/websockets/">websockets</a> <a class="post-tag" href="/tags/abstract-syntax-tree/">abstract-syntax-tree</a> <a class="post-tag" href="/tags/agent/">agent</a> <a class="post-tag" href="/tags/arduino/">arduino</a> <a class="post-tag" href="/tags/bootstrap/">bootstrap</a> <a class="post-tag" href="/tags/c/">c</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/understanding-the-function-surf-in-octave-matlab/"><div class="card-body"> <em class="timeago small" date="2019-07-20 00:00:00 +0200" >Jul 20, 2019</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Understanding the function surf() in Octave/MATLAB</h3><div class="text-muted small"><p> I’ve been studying Machine Learning for a few days now, on Coursera. After finishing 1st and 2nd weeks, I’ve got the first assignment for the course where you are supposed to implement Linear Regre...</p></div></div></a></div><div class="card"> <a href="/posts/ruby-notes/"><div class="card-body"> <em class="timeago small" date="2020-06-20 00:00:00 +0200" >Jun 20, 2020</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Ruby notes worth noting</h3><div class="text-muted small"><p> Here I am going to keep my Ruby notes that I’ve found useful and would like to read again in the future with their links to the source. Class Methods While some object oriented languages have ...</p></div></div></a></div><div class="card"> <a href="/posts/how-to-add-bootstrap-to-rails-6/"><div class="card-body"> <em class="timeago small" date="2021-03-03 00:00:00 +0100" >Mar 3, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to add Bootstrap to a Rails 6 project</h3><div class="text-muted small"><p> Create a new Rails 6 project. 1 $ rails new awesome-project Add bootstrap, popper.js and jquery using yarn. 1 $ yarn add bootstrap popper.js jquery Copy the snippet below into config/webpack/en...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/understanding-the-function-surf-in-octave-matlab/" class="btn btn-outline-primary" prompt="Older"><p>Understanding the function surf() in Octave/MATLAB</p></a> <a href="/posts/ruby-notes/" class="btn btn-outline-primary" prompt="Newer"><p>Ruby notes worth noting</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/andreyuhai">Burak Kaymakci</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/elixir/">elixir</a> <a class="post-tag" href="/tags/ruby/">ruby</a> <a class="post-tag" href="/tags/matlab/">matlab</a> <a class="post-tag" href="/tags/octave/">octave</a> <a class="post-tag" href="/tags/websockets/">websockets</a> <a class="post-tag" href="/tags/abstract-syntax-tree/">abstract-syntax-tree</a> <a class="post-tag" href="/tags/agent/">agent</a> <a class="post-tag" href="/tags/arduino/">arduino</a> <a class="post-tag" href="/tags/bootstrap/">bootstrap</a> <a class="post-tag" href="/tags/c/">c</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-7JNCCP2ZJ3"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-7JNCCP2ZJ3'); }); </script>
